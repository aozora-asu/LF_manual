#!/bin/sh
# Auto-generate release zip after each commit.
# Uses the system python if available.

if command -v python3 >/dev/null 2>&1; then
  PY=python3
elif command -v python >/dev/null 2>&1; then
  PY=python
else
  exit 0
fi

# Build + package (can be heavy).
# If you want to skip on a specific commit:
#   SKIP_RELEASE_ZIP=1 git commit ...
if [ "${SKIP_RELEASE_ZIP}" = "1" ]; then
  exit 0
fi

"$PY" scripts/package_release.py >/dev/null 2>&1 || true
