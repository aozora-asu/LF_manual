{% extends "base.html" %}
{% block title %}{{ page.title }} を編集 - {{ site_name }}{% endblock %}
{% block content %}
<h2>「{{ page.title }}」を編集</h2>
<form method="post" class="page-form">
    <div class="form-group">
        <label for="title">タイトル</label>
        <input type="text" id="title" name="title" value="{{ page.title }}" required>
    </div>
    <div class="form-group">
        <label>本文</label>
        <textarea id="editor" name="body" style="display:none">{{ page.body }}</textarea>
    </div>
    <div class="form-actions">
        <button type="submit" class="btn">保存</button>
        <a href="{{ url_for('pages.view_page', slug=page.slug) }}" class="btn btn-secondary">キャンセル</a>
    </div>
</form>
{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='js/editor.js') }}"></script>
<script>
initWysiwygEditor('editor', {{ html_body | tojson }});
</script>
{% endblock %}
