{% extends "base.html" %}
{% block title %}{{ page.title }} の履歴 - {{ site_name }}{% endblock %}
{% block content %}
<h2>「{{ page.title }}」の変更履歴</h2>
<p><a href="{{ url_for('pages.view_page', slug=page.slug) }}">ページに戻る</a></p>

{% if commits %}
    <table class="history-table">
        <thead>
            <tr>
                <th>表示</th>
                <th>日時</th>
                <th>メッセージ</th>
            </tr>
        </thead>
        <tbody>
            {% for commit in commits %}
            <tr>
                <td>
                    <a href="{{ url_for('history.page_compare_latest', slug=page.slug, commit_id=commit.id) }}" class="btn btn-small history-compare-btn">
                        比較表示
                    </a>
                </td>
                <td>{{ commit.timestamp_str }}</td>
                <td>{{ commit.message }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
<p>履歴がありません。</p>
{% endif %}
{% endblock %}
